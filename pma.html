<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>PMA Assignment</title>
<script src="clickEvent.js"></script>
<script src="jquery-3.6.0.min.js"></script>
<script src="knockout-3.5.1.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script>
<style type="text/css">

	.pma-container{
		position: relative;
		top: 90px;
		width: 620px;
		margin-left: 100px;
		padding-top: 50px;
		height: 250px;
		left: 300px;
		background: #1C1E25;

	}
	.pmatitle{
		position: relative;
		left: 10px;
		bottom: 40px;
		color: #A5A7B0;
		font-size: 17px;
	}
	.first-pma, .second-pma, .third-pma, .fourth-pma{
		position: relative;
		margin: 25px;
		display: inline-flex;
		width: 60px;
		height: 60px;
		left: 80px;
		border-radius: 50%;
		align-items: center;
		justify-content: center;
		border: none;
		text-decoration: none;
		box-shadow: inset 0px 0px 14px 5px #484848;
	}

	.vertical{
		position: relative;
		border-left: 4px solid #00CF75;
		margin: 0 40px;
		padding: 15px;
		left: 95px;

	}

	.fa-power-off{
		cursor: pointer;
		font-size: 20px;
		font-weight: bolder;
	}

	.channel{
		position: absolute;
		width: 75px;
		top: 90px;
		color: #A7A8B2;
	}

</style>

<script>
<!--	$(document).ready(function(){-->
<!--		$("#firstPMA").click(function(){-->
<!--			this.status1 == true;-->
<!--			console.log(this.status1());-->
<!--		})-->
<!--	})-->

</script>
</head>
<body>

<template id="pma-component">
	<div class="pma-container">
		<span class="pmatitle" data-bind="text: name"></span><br>
		<div>
			<span class="vertical"></span>
			<span class="vertical"></span>
			<span class="vertical"></span>
			<span class="vertical"></span>
		</div>
		<div id="firstPMA" class="first-pma" data-bind="style: styling, click: changeStyles ">
			<i class="fas fa-power-off"></i><br>
			<span class="channel" data-bind="text: ChannelTitle1"></span>
		</div>
		<div id="secondPMA" class="second-pma" data-bind="style: styling1, click: changeStyles1">
			<i class="fas fa-power-off"></i><br>
			<span class="channel" data-bind="text: ChannelTitle2"></span>
		</div>
		<div id="thirdPMA" class="third-pma" data-bind="style: {background: Status3}">
			<i class="fas fa-power-off"></i><br>
			<span class="channel" data-bind="text: ChannelTitle3"></span>
		</div>
		<div id="fourthPMA" class="fourth-pma" data-bind="style: {background: Status4}">
			<i class="fas fa-power-off"></i><br>
			<span class="channel" data-bind="text: ChannelTitle4"></span>
		</div>
	</div>
</template>

	<pma-detail params="data: data"></pma-detail>


<script>

	var observable = ko.observable,
    data = ko.mapping.fromJS(
    {
        "name": "PMA 1",
        "channels": [{
            "id": 1,
            "status": true
        }, {
            "id": 2,
            "status": true
        }, {
            "id": 3,
            "status": true
        }, {
            "id": 4,
            "status": true
        }]
    });
    ko.components.register('pma-detail', {
      viewModel: function(params) {
      	this.name = params.data.name;
		this.channel1 = params.data.channels()[0].id;
		this.channel2 = params.data.channels()[1].id;
		this.channel3 = params.data.channels()[2].id;
		this.channel4 = params.data.channels()[3].id;
		this.status1 = params.data.channels()[0].status;
		this.status2 = params.data.channels()[1].status;
		this.status3 = params.data.channels()[2].status;
		this.status4 = params.data.channels()[3].status;

		console.log(this.status1());
		this.SwitchOn = function(){
			params.data.channels()[0].status = true;
			this.status1 = params.data.channels()[0].status;
			console.log(this.status1);
		}

		this.styling = ko.observable({
    		'background': '#00CA73'
    	});
    	this.styling1 = ko.observable({
    		'background': '#00CA73'
    	});

    	 this.changeStyles = function(){
    	 	params.data.channels()[0].status = false;
			this.status1 = params.data.channels()[0].status;
			console.log(this.status1);
			this.styling({
				'background': '#C73030'
			});
		};

		this.changeStyles1 = function(){
			console.log(this.status1());
			this.styling1({
				'background': '#C73030'
			});
		};

		this.Status1 = ko.computed(function(){
            if(this.status1() == true){
            	return '#00CA73';
            }else
            	return '#C73030';
        }, this)

        this.Status2 = ko.computed(function(){
            if(this.status2() == true)
            	return '#00CA73';
            else
            	return '#C73030';
        }, this)

        this.Status3 = ko.computed(function(){
            if(this.status3() == true)
            	return '#00CA73';
            else
            	return '#C73030';
        }, this)

        this.Status4 = ko.computed(function(){
            if(this.status4() == true)
            	return '#00CA73';
            else
            	return '#C73030';
        }, this)

		this.ChannelTitle1 = ko.computed(function(){
            return 'Channel' + ' ' + ko.utils.unwrapObservable(this.channel1());
        }, this)

        this.ChannelTitle2 = ko.computed(function(){
            return 'Channel' + ' ' + ko.utils.unwrapObservable(this.channel2());
        }, this)

        this.ChannelTitle3 = ko.computed(function(){
            return 'Channel' + ' ' + ko.utils.unwrapObservable(this.channel3());
        }, this)

        this.ChannelTitle4 = ko.computed(function(){
            return 'Channel' + ' ' + ko.utils.unwrapObservable(this.channel4());
        }, this)
      },
      template: {
        element: 'pma-component'
      }
    });


    ko.applyBindings();

</script>
</body>
</html>